(()=>{var ye=Object.defineProperty,me=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))ve.call(t,r)&&X(e,r,t[r]);if(Y)for(var r of Y(t))be.call(t,r)&&X(e,r,t[r]);return e},R=(e,t)=>me(e,ge(t)),we=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},Te=async(e,t)=>{var r,n,s,u,o,c;let l=t||{},i={onRequest:[t?.onRequest],onResponse:[t?.onResponse],onSuccess:[t?.onSuccess],onError:[t?.onError],onRetry:[t?.onRetry]};if(!t||!t?.plugins)return{url:e,options:l,hooks:i};for(let a of t?.plugins||[]){if(a.init){let f=await((r=a.init)==null?void 0:r.call(a,e.toString(),t));l=f.options||l,e=f.url}i.onRequest.push((n=a.hooks)==null?void 0:n.onRequest),i.onResponse.push((s=a.hooks)==null?void 0:s.onResponse),i.onSuccess.push((u=a.hooks)==null?void 0:u.onSuccess),i.onError.push((o=a.hooks)==null?void 0:o.onError),i.onRetry.push((c=a.hooks)==null?void 0:c.onRetry)}return{url:e,options:l,hooks:i}},z=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},Re=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}};function _e(e){if(typeof e=="number")return new z({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new z(e);case"exponential":return new Re(e);default:throw new Error("Invalid retry strategy")}}var Se=async e=>{let t={},r=async n=>typeof n=="function"?await n():n;if(e?.auth){if(e.auth.type==="Bearer"){let n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if(e.auth.type==="Basic"){let n=r(e.auth.username),s=r(e.auth.password);if(!n||!s)return t;t.authorization=`Basic ${btoa(`${n}:${s}`)}`}else if(e.auth.type==="Custom"){let n=r(e.auth.value);if(!n)return t;t.authorization=`${r(e.auth.prefix)} ${n}`}}return t},Pe=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Oe(e){let t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let n=t.split(";").shift()||"";return Pe.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}function Ee(e){try{return JSON.parse(e),!0}catch{return!1}}function ee(e){if(e===void 0)return!1;let t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}function Z(e){try{return JSON.parse(e)}catch{return e}}function K(e){return typeof e=="function"}function Ue(e){if(e?.customFetchImpl)return e.customFetchImpl;if(typeof globalThis<"u"&&K(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&K(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function xe(e){let t=new Headers(e?.headers),r=await Se(e);for(let[n,s]of Object.entries(r||{}))t.set(n,s);if(!t.has("content-type")){let n=Le(e?.body);n&&t.set("content-type",n)}return t}function Le(e){return ee(e)?"application/json":null}function Ae(e){if(!e?.body)return null;let t=new Headers(e?.headers);if(ee(e.body)&&!t.has("content-type")){for(let[r,n]of Object.entries(e?.body))n instanceof Date&&(e.body[r]=n.toISOString());return JSON.stringify(e.body)}return e.body}function Ne(e,t){var r;if(t?.method)return t.method.toUpperCase();if(e.startsWith("@")){let n=(r=e.split("@")[1])==null?void 0:r.split("/")[0];return re.includes(n)?n.toUpperCase():t?.body?"POST":"GET"}return t?.body?"POST":"GET"}function Ie(e,t){let r;return!e?.signal&&e?.timeout&&(r=setTimeout(()=>t?.abort(),e?.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}var Ce=class te extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,te.prototype)}};async function q(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new Ce(r.issues);return r.value}var re=["get","post","put","patch","delete"];var ke=e=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(t,r){var n,s,u,o;let c=((s=(n=e.plugins)==null?void 0:n.find(l=>{var i;return(i=l.schema)!=null&&i.config?t.startsWith(l.schema.config.baseURL||"")||t.startsWith(l.schema.config.prefix||""):!1}))==null?void 0:s.schema)||e.schema;if(c){let l=t;(u=c.config)!=null&&u.prefix&&l.startsWith(c.config.prefix)&&(l=l.replace(c.config.prefix,""),c.config.baseURL&&(t=t.replace(c.config.prefix,c.config.baseURL))),(o=c.config)!=null&&o.baseURL&&l.startsWith(c.config.baseURL)&&(l=l.replace(c.config.baseURL,""));let i=c.schema[l];if(i){let a=R(v({},r),{method:i.method,output:i.output});return r?.disableValidation||(a=R(v({},a),{body:i.input?await q(i.input,r?.body):r?.body,params:i.params?await q(i.params,r?.params):r?.params,query:i.query?await q(i.query,r?.query):r?.query})),{url:t,options:a}}}return{url:t,options:r}}}),ne=e=>{async function t(r,n){let s=R(v(v({},e),n),{plugins:[...e?.plugins||[],ke(e||{})]});if(e?.catchAllError)try{return await $(r,s)}catch(u){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:u}}}return await $(r,s)}return t};function je(e,t){let{baseURL:r,params:n,query:s}=t||{query:{},params:{},baseURL:""},u=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){let f=e.toString().split("@")[1].split("/")[0];re.includes(f)&&(e=e.replace(`@${f}/`,"/"))}u.endsWith("/")||(u+="/");let[o,c]=e.replace(u,"").split("?"),l=new URLSearchParams(c);for(let[f,p]of Object.entries(s||{}))p!=null&&l.set(f,String(p));if(n)if(Array.isArray(n)){let f=o.split("/").filter(p=>p.startsWith(":"));for(let[p,w]of f.entries()){let _=n[p];o=o.replace(w,_)}}else for(let[f,p]of Object.entries(n))o=o.replace(`:${f}`,String(p));o=o.split("/").map(encodeURIComponent).join("/"),o.startsWith("/")&&(o=o.slice(1));let i=l.toString();return i=i.length>0?`?${i}`.replace(/\+/g,"%20"):"",u.startsWith("http")?new URL(`${o}${i}`,u):`${u}${o}${i}`}var $=async(e,t)=>{var r,n,s,u,o,c,l,i;let{hooks:a,url:f,options:p}=await Te(e,t),w=Ue(p),_=new AbortController,T=(r=p.signal)!=null?r:_.signal,S=je(f,p),L=Ae(p),U=await xe(p),d=Ne(f,p),h=R(v({},p),{url:S,headers:U,body:L,method:d,signal:T});for(let g of a.onRequest)if(g){let m=await g(h);m instanceof Object&&(h=m)}("pipeTo"in h&&typeof h.pipeTo=="function"||typeof((n=t?.body)==null?void 0:n.pipe)=="function")&&("duplex"in h||(h.duplex="half"));let{clearTimeout:k}=Ie(p,_),y=await w(h.url,h);k();let G={response:y,request:h};for(let g of a.onResponse)if(g){let m=await g(R(v({},G),{response:(s=t?.hookOptions)!=null&&s.cloneResponse?y.clone():y}));m instanceof Response?y=m:m instanceof Object&&(y=m.response)}if(y.ok){if(!(h.method!=="HEAD"))return{data:"",error:null};let m=Oe(y),P={data:"",response:y,request:h};if(m==="json"||m==="text"){let O=await y.text(),he=await((u=h.jsonParser)!=null?u:Z)(O);P.data=he}else P.data=await y[m]();h?.output&&h.output&&!h.disableValidation&&(P.data=await q(h.output,P.data));for(let O of a.onSuccess)O&&await O(R(v({},P),{response:(o=t?.hookOptions)!=null&&o.cloneResponse?y.clone():y}));return t?.throw?P.data:{data:P.data,error:null}}let de=(c=t?.jsonParser)!=null?c:Z,j=await y.text(),Q=Ee(j),W=Q?await de(j):null,pe={response:y,responseText:j,request:h,error:R(v({},W),{status:y.status,statusText:y.statusText})};for(let g of a.onError)g&&await g(R(v({},pe),{response:(l=t?.hookOptions)!=null&&l.cloneResponse?y.clone():y}));if(t?.retry){let g=_e(t.retry),m=(i=t.retryAttempt)!=null?i:0;if(await g.shouldAttemptRetry(m,y)){for(let O of a.onRetry)O&&await O(G);let P=g.getDelay(m);return await new Promise(O=>setTimeout(O,P)),await $(e,R(v({},t),{retryAttempt:m+1}))}}if(t?.throw)throw new we(y.status,y.statusText,Q?W:j);return{data:null,error:R(v({},W),{status:y.status,statusText:y.statusText})}};var M=Object.create(null),A=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?M:globalThis),E=new Proxy(M,{get(e,t){return A()[t]??M[t]},has(e,t){let r=A();return t in r||t in M},set(e,t,r){let n=A(!0);return n[t]=r,!0},deleteProperty(e,t){if(!t)return!1;let r=A(!0);return delete r[t],!0},ownKeys(){let e=A(!0);return Object.keys(e)}});function qe(e){return e?e!=="false":!1}var Me=typeof process<"u"&&process.env&&"production"||"";var it=Me==="test"||qe(E.TEST);var N=class extends Error{constructor(t,r){super(t),this.name="BetterAuthError",this.message=t,this.cause=r,this.stack=""}};function De(e){try{return new URL(e).pathname!=="/"}catch{throw new N(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}function I(e,t="/api/auth"){return De(e)?e:(t=t.startsWith("/")?t:`/${t}`,`${e.replace(/\/+$/,"")}${t}`)}function se(e,t,r){if(e)return I(e,t);let n=E.BETTER_AUTH_URL||E.NEXT_PUBLIC_BETTER_AUTH_URL||E.PUBLIC_BETTER_AUTH_URL||E.NUXT_PUBLIC_BETTER_AUTH_URL||E.NUXT_PUBLIC_AUTH_URL||(E.BASE_URL!=="/"?E.BASE_URL:void 0);if(n)return I(n,t);let s=r?.headers.get("x-forwarded-host"),u=r?.headers.get("x-forwarded-proto");if(s&&u)return I(`${u}://${s}`,t);if(r){let o=Be(r.url);if(!o)throw new N("Could not get origin from request. Please provide a valid base URL.");return I(o,t)}if(typeof window<"u"&&window.location)return I(window.location.origin,t)}function Be(e){try{return new URL(e).origin}catch{return null}}var b=[],x=0,D=4,Fe=0,C=e=>{let t=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=t.push(n),()=>{for(let u=x+D;u<b.length;)b[u]===n?b.splice(u,D):u+=D;let s=t.indexOf(n);~s&&(t.splice(s,1),--r.lc||r.off())}},notify(n,s){Fe++;let u=!b.length;for(let o of t)b.push(o,r.value,n,s);if(u){for(x=0;x<b.length;x+=D)b[x](b[x+1],b[x+2],b[x+3]);b.length=0}},off(){},set(n){let s=r.value;s!==n&&(r.value=n,r.notify(s))},subscribe(n){let s=r.listen(n);return n(r.value),s},value:e};return r};var We=5,B=6,F=10,$e=(e,t,r,n)=>(e.events=e.events||{},e.events[r+F]||(e.events[r+F]=n(s=>{e.events[r].reduceRight((u,o)=>(o(u),u),{shared:{},...s})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let s=e.events[r],u=s.indexOf(t);s.splice(u,1),s.length||(delete e.events[r],e.events[r+F](),delete e.events[r+F])});var oe=1e3,H=(e,t)=>$e(e,n=>{let s=t(n);s&&e.events[B].push(s)},We,n=>{let s=e.listen;e.listen=(...o)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...o));let u=e.off;return e.events[B]=[],e.off=()=>{u(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let o of e.events[B])o();e.events[B]=[]}},oe)},()=>{e.listen=s,e.off=u}});var He=typeof window>"u",J=(e,t,r,n)=>{let s=C({data:null,error:null,isPending:!0,isRefetching:!1,refetch:()=>u()}),u=()=>{let c=typeof n=="function"?n({data:s.get().data,error:s.get().error,isPending:s.get().isPending}):n;return r(t,{...c,async onSuccess(l){s.set({data:l.data,error:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await c?.onSuccess?.(l)},async onError(l){let{request:i}=l,a=typeof i.retry=="number"?i.retry:i.retry?.attempts,f=i.retryAttempt||0;a&&f<a||(s.set({error:l.error,data:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await c?.onError?.(l))},async onRequest(l){let i=s.get();s.set({isPending:i.data===null,data:i.data,error:null,isRefetching:!0,refetch:s.value.refetch}),await c?.onRequest?.(l)}})};e=Array.isArray(e)?e:[e];let o=!1;for(let c of e)c.subscribe(()=>{He||(o?u():H(s,()=>(setTimeout(()=>{u()},0),o=!0,()=>{s.off(),c.off()})))});return s};var Je={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},Ve=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,ie={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},Ge=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function Qe(e){return e instanceof Date&&!isNaN(e.getTime())}function Ye(e){let t=Ge.exec(e);if(!t)return null;let[,r,n,s,u,o,c,l,i,a,f]=t,p=new Date(Date.UTC(parseInt(r,10),parseInt(n,10)-1,parseInt(s,10),parseInt(u,10),parseInt(o,10),parseInt(c,10),l?parseInt(l.padEnd(3,"0"),10):0));if(i){let w=(parseInt(a,10)*60+parseInt(f,10))*(i==="+"?-1:1);p.setUTCMinutes(p.getUTCMinutes()+w)}return Qe(p)?p:null}function Xe(e,t={}){let{strict:r=!1,warnings:n=!1,reviver:s,parseDates:u=!0}=t;if(typeof e!="string")return e;let o=e.trim();if(o[0]==='"'&&o.endsWith('"')&&!o.slice(1,-1).includes('"'))return o.slice(1,-1);let c=o.toLowerCase();if(c.length<=9&&c in ie)return ie[c];if(!Ve.test(o)){if(r)throw new SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(Je).some(([i,a])=>{let f=a.test(o);return f&&n&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${i} pattern`),f})&&r)throw new Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(o,(a,f)=>{if(a==="__proto__"||a==="constructor"&&f&&typeof f=="object"&&"prototype"in f){n&&console.warn(`[better-json] Dropping "${a}" key to prevent prototype pollution`);return}if(u&&typeof f=="string"){let p=Ye(f);if(p)return p}return s?s(a,f):f})}catch(i){if(r)throw i;return e}}function ae(e,t={strict:!0}){return Xe(e,t)}var ze={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&typeof window<"u"&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}};function Ze(e){let t=C(!1);return{session:J(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}var ue=e=>{let t="credentials"in Request.prototype,r=se(e?.baseURL,e?.basePath),n=e?.plugins?.flatMap(d=>d.fetchPlugins).filter(d=>d!==void 0)||[],s={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:u,onError:o,onRequest:c,onResponse:l,...i}=e?.fetchOptions||{},a=ne({baseURL:r,...t?{credentials:"include"}:{},method:"GET",jsonParser(d){return d?ae(d,{strict:!1}):null},customFetchImpl:async(d,h)=>{try{return await fetch(d,h)}catch{return Response.error()}},...i,plugins:[s,...i.plugins||[],...e?.disableDefaultFetchPlugins?[]:[ze],...n]}),{$sessionSignal:f,session:p}=Ze(a),w=e?.plugins||[],_={},T={$sessionSignal:f,session:p},S={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},L=[{signal:"$sessionSignal",matcher(d){return d==="/sign-out"||d==="/update-user"||d.startsWith("/sign-in")||d.startsWith("/sign-up")||d==="/delete-user"||d==="/verify-email"}}];for(let d of w)d.getAtoms&&Object.assign(T,d.getAtoms?.(a)),d.pathMethods&&Object.assign(S,d.pathMethods),d.atomListeners&&L.push(...d.atomListeners);let U={notify:d=>{T[d].set(!T[d].get())},listen:(d,h)=>{T[d].subscribe(h)},atoms:T};for(let d of w)d.getActions&&Object.assign(_,d.getActions?.(a,U,e));return{pluginsActions:_,pluginsAtoms:T,pluginPathMethods:S,atomListeners:L,$fetch:a,$store:U}};function Ke(e,t,r){let n=t[e],{fetchOptions:s,query:u,...o}=r||{};return n||(s?.method?s.method:o&&Object.keys(o).length>0?"POST":"GET")}function le(e,t,r,n,s){function u(o=[]){return new Proxy(function(){},{get(c,l){let i=[...o,l],a=e;for(let f of i)if(a&&typeof a=="object"&&f in a)a=a[f];else{a=void 0;break}return typeof a=="function"?a:u(i)},apply:async(c,l,i)=>{let a="/"+o.map(U=>U.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)).join("/"),f=i[0]||{},p=i[1]||{},{query:w,fetchOptions:_,...T}=f,S={...p,..._},L=Ke(a,r,f);return await t(a,{...S,body:L==="GET"?void 0:{...T,...S?.body||{}},query:w||S?.query,method:L,async onSuccess(U){await S?.onSuccess?.(U);let d=s?.find(y=>y.matcher(a));if(!d)return;let h=n[d.signal];if(!h)return;let k=h.get();setTimeout(()=>{h.set(!k)},10)}})}})}return u()}function ce(e){return e.charAt(0).toUpperCase()+e.slice(1)}function V(e){let{pluginPathMethods:t,pluginsActions:r,pluginsAtoms:n,$fetch:s,atomListeners:u,$store:o}=ue(e),c={};for(let[a,f]of Object.entries(n))c[`use${ce(a)}`]=f;let l={...r,...c,$fetch:s,$store:o};return le(l,s,t,n,u)}var fe=V({baseURL:"http://tovchecker.com"});var et=document.getElementById("githubsignin");et.addEventListener("click",async()=>{let{data:e,error:t}=await fe.signIn.social({provider:"github",callbackURL:"/auth/success"});console.log("THE DATA:"),console.log(e)});})();
